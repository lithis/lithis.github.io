Init{name(Moses)
z=360
x=365
lockgun(1)
setaccel(5)
gosub(F)
regcore(B)
regcldrobot(A,1)
regcustom(C,2,k)
regascan(F,3)
bodyleft(5)
scan()
q=z-scandist
j=95
k=1}
A{if(cldenergy¤energy)
stop()
endif
g=gunaim
r=(z+bodyaim+cldbearing-g)%z
gunleft(z*(r>180)-r)
waitfor(gunrmnª0)
gosub(F)
gunleft(gunaim-g)
continue()}
B{k=(w>3)
w=w-2*(w>3)+1
y=0
back(x)
gosub(F)
y=2
ahead(x)
gosub(F)}
C{k=0
waitfor(bodyrmnª0)
ascanevents(0)
blocking(0)
back(q)
stop()
gunright(j*(j<95))
bodyright(j)
continue()
ascanevents(1)
waitfor(bodyrmnª0)
q=z
j=90}
F{scan()
e=energy-1
if(dtccookie|(dtcrobot&dtcenergy*4<e))
q=distrmn+9
j=90
w=3+y
endif
if(dtcrobot&e)
gosub(H)
gosub(F)
endif}
H{d=dtcenergy
s=scandist
if((e*4<d|s>170)&moving)
return
endif
min((d+3)/4,e)
fire(result*(s*moving<100))
fire(s<170)}