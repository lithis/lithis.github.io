fire{gosub(figtokill)
min(fire_0,result)
min(result,energy-1)
min(result,7)
if(result-scandist/90<1&fire_0>1)
fire(1)
else
fire(result)
endif}
figtokill{if(dtcrobot)
_en=dtcenergy
_sc=scandist
else
_en=(cldenergy+30*(cldmissile&cldenergy<1))
_sc=0
endif
truncate(_sc/180)
truncate((_en+3)/4+result)
_tokill=result
if(_en<=0)
_tokill=0
elseif(_en<=5)
_tokill=1
endif
min(_tokill,energy-1)
min(result,7)
_tokill=result
truncate(_sc/180)
if((_tokill-result)*4-1<4+_tokill)
_tokill=1
endif
min(_tokill,_tokill)}
Init{Name(spot)
RegCore(core)
mdist=150
regcldmissile(missilehit,1)
blocking(0)
setaccel(5)
scan()
fire_0=dtcrobot*7
gosub(fire)
getothers()
if(result>1)
gosub(findopening)
mdist=90
else
bodyright(80)
waitfor(bodyrmn==0)
ahead(400)
dir=1
mdisty=250
endif
sa=5
gunleft(8)
lockgun(1)
gunright(32000)
regcldrobot(crash,1)
mul=1
quiet=1}
missilehit{if((cldenergy+30*(cldmissile&cldenergy<1))>5|energy<40)
max(0,quiet-1)
quiet=result
endif}
Core{setaccel(5-4*(energy==1&quiet>1))
reps6B3=0
gosub(wloop6B3)
if(sa==1000)
quiet=100
endif
dir=-dir
getothers()
others=result
if(others>=5)
mdist=90
elseif(others==4)
mdist=100
elseif(others==3)
mdist=140
elseif(others==2)
mdist=180
elseif(others==1)
mdist=250
else
lockgun(0)
repsD7A=0
gosub(wloopD7A)
endif
ahead(mdist*2*dir*mul)
if(gunrmn<1000)
gunright(32000)
endif
if(distrmn<100)
stop()
bodyleft(20)
continue()
endif
if(quiet==0)
min(30,distrmn/3)
else
min(0,0)
endif
max(distrmn-mdist*mul,result)
mul=1
sa=result}
crash{quiet=0
if((bodyaim+360)&90)
min(180,((CLDBEARING+BODYAIM)+900)%360-180)
ch=result
if(ch<-135|ch>=135)
ch=180
elseif(ch<-45)
ch=-90
elseif(ch<45)
ch=0
else
ch=90
endif
min(180,((CH-BODYAIM)+900)%360-180)
cldb=result
else
cldb=cldbearing
endif
abs(cldb)
if(result>90)
dir=1
else
dir=-1
endif
ahead(mdist*1.5*dir)
stop()
bodyleft(45)
continue()
mul=.5
x=18
gosub(wloop1194)}
findopening{lockgun(0)
radarleft(360)
gosub(wloop122C)
firstangle=radaraim
angle=radaraim
width=0
bestangle=0
bestwidth=0
r=1
gosub(wloop12A2)
width=angle-firstangle+360
angle=firstangle
if(width>bestwidth)
bestangle=angle
bestwidth=width
endif
d=(((BESTANGLE+BESTWIDTH/2)+900)%360-180)
dir=((D*((D>0)*2-1)<=90)*2-1)
turn=((D+450)%180-90)
bodyright(turn)
waitfor(bodyrmn==0)
ahead(400*dir)}
wloop1194{if(MOVING&X>0)
X=X-1
SCAN()
IF(DTCROBOT&GUNHEAT==0&SCANDIST<MDIST)
FIRE_0=7
gosub(FIRE)
ENDIF
gosub(wloop1194)
endif}
wloop122C{if(DTCROBOT==0&RADARRMN)
SCAN()
gosub(wloop122C)
endif}
wloop12A2{if(R)
R=RADARRMN
SCAN()
IF(DTCROBOT)
WIDTH=ANGLE-RADARAIM
ANGLE=RADARAIM
IF(WIDTH>BESTWIDTH)
BESTANGLE=ANGLE
BESTWIDTH=WIDTH
ENDIF
ENDIF
gosub(wloop12A2)
endif}
wloop6B3{reps6B3=reps6B3+1
if(DISTRMN>SA|BODYRMN|QUIET)
IF(QUIET&MOVING&DISTRMN<=SA&BODYRMN==0)
BACK(0)
ENDIF
GETOTHERS()
IF(RESULT<3&QUIET>0)
MAX(0,QUIET-1)
QUIET=RESULT
ENDIF
SCAN()
IF(DTCROBOT)
FIREDELAY=FIREDELAY-1
IF(GUNHEAT==0)
IF((SCANDIST<MDIST|DTCENERGY<6)&(OTHERS<=3|DTCENERGY<=ENERGY|SCANDIST<100))
FIRE_0=7
gosub(FIRE)
FIREDELAY=40*(SCANDIST<MDIST&(DTCENERGY>6|DTCENERGY*4-3>ENERGY-3))
ELSEIF(FIREDELAY<0)
ABS((DTCBEARING*((DTCBEARING>0)*2-1))-90)
IF(RESULT>=70)
FIRE_0=5
gosub(FIRE)
ELSEIF((RADARAIM+10)%90<=20)
FIRE_0=3
gosub(FIRE)
ELSEIF(DISTRMN<MDIST&DISTRMN<SA+50)
FIRE_0=3
gosub(FIRE)
ELSEIF(ENERGY>50)
FIRE_0=1
gosub(FIRE)
ENDIF
ENDIF
ENDIF
ABS(DTCBEARING)
IF((RESULT-90)*DIR>0)
SA=SA+20
ELSE
MAX(SA-20,0)
SA=RESULT
ENDIF
GETSHOTS()
SH=RESULT+1
GETHITSOTHER()
HO=RESULT+1
IF(((HO/SH<.4&SH-HO>4)|ENERGY>DTCENERGY*5-4)&ENERGY*2-1>=DTCENERGY&DISTRMN>SA&OTHERS==1)
TURN=((DTCBEARING+450)%180-90)
IF(TURN&BODYRMN==0&QUIET==0)
DIR=((DTCBEARING*((DTCBEARING>0)*2-1)<=90)*2-1)
DIR=-DIR
SA=1000
SETACCEL(1)
SC=SCANDIST+5
STOP()
BODYRIGHT(TURN)
CONTINUE()
MUL=SC/MDIST
ENDIF
ENDIF
ELSEIF(DTCCOOKIE&BODYRMN==0)
IF(SCANDIST<900/(OTHERS+.5))
TURN=((DTCBEARING+450)%180-90)
IF(TURN&QUIET==0)
DIR=((DTCBEARING*((DTCBEARING>0)*2-1)<=90)*2-1)
DIR=-DIR
SA=999
SC=SCANDIST+30
BODYRIGHT(TURN)
MUL=SC/MDIST
ENDIF
ENDIF
ENDIF
if(reps6B3<40)
gosub(wloop6B3)
gosub(wloop6B3)
endif
endif
reps6B3=reps6B3-1}
wloopD7A{repsD7A=repsD7A+1
if(1)
BODYRIGHT(32000)
GUNRIGHT(32000)
RADARRIGHT(32000)
WAITFOR(RADARRMN==0)
if(repsD7A<40)
gosub(wloopD7A)
gosub(wloopD7A)
endif
endif
repsD7A=repsD7A-1}
